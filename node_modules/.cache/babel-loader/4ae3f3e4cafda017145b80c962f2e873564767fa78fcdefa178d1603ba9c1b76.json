{"ast":null,"code":"import{configureStore,createSlice}from\"@reduxjs/toolkit\";const cartSlice=createSlice({name:'cart',initialState:{items:[],totalQuantity:0},reducers:{replaceCart(state,action){state.totalQuantity=action.payload.totalQuantity;state.items=action.payload.items;},addItem(state,action){const newItem=action.payload;console.log(newItem.id);const existingItem=state.items.find(item=>item.itemId===newItem.id);console.log(existingItem);state.totalQuantity+=1;if(!existingItem){state.items.push({itemId:newItem.id,price:newItem.price,quantity:newItem.quantity,totalPrice:newItem.price*newItem.quantity,name:newItem.title});}else{existingItem.quantity+=1;existingItem.totalPrice+=existingItem.price;}},removeItem(state,action){const id=action.payload;const neededItemIndex=state.items.findIndex(item=>item.itemId===id);if(state.items[neededItemIndex].quantity===1){state.items=state.items.filter(item=>item.itemId!==id);}else{state.items[neededItemIndex].quantity-=1;state.items[neededItemIndex].totalPrice-=state.items[neededItemIndex].price;}}}});const uiSlice=createSlice({name:'ui',initialState:{cartIsVisible:false,notification:null},reducers:{toggle(state){state.cartIsVisible=!state.cartIsVisible;},showNotification(state,action){state.notification={status:action.payload.status,title:action.payload.title,message:action.payload.message};}}});const store=configureStore({reducer:{cart:cartSlice.reducer,ui:uiSlice.reducer}});export function sendCartData(cart){return async dispatch=>{dispatch(uiActions.showNotification({status:'pending',title:'Sending',message:'Sending cart data!'}));async function sendRequest(){const response=fetch('https://reactpractice-f5d9b-default-rtdb.firebaseio.com/cart.json',{method:'PUT',body:JSON.stringify(cart)});if(!response.ok){throw new Error('Sending cart data failed!');}}try{await sendRequest();dispatch(uiActions.showNotification({status:'success',title:'Success',message:'Sent cart data successfully!'}));}catch(error){dispatch(uiActions.showNotification({status:'error',title:'Error',message:'Could not save your data!'}));}};}export function fetchCartData(){return async dispatch=>{async function fetchData(){const response=await fetch('https://reactpractice-f5d9b-default-rtdb.firebaseio.com/cart.json');if(!response.ok){throw new Error('Could not fetch cart data!');}const data=await response.json();return data;}try{const data=await fetchData();console.log(data);dispatch(cartActions.replaceCart(data));}catch(error){dispatch(uiActions.showNotification({status:'error',title:'Error',message:'Could not fetch the data!'}));}};}export const cartActions=cartSlice.actions;export const uiActions=uiSlice.actions;export default store;","map":{"version":3,"names":["configureStore","createSlice","cartSlice","name","initialState","items","totalQuantity","reducers","replaceCart","state","action","payload","addItem","newItem","console","log","id","existingItem","find","item","itemId","push","price","quantity","totalPrice","title","removeItem","neededItemIndex","findIndex","filter","uiSlice","cartIsVisible","notification","toggle","showNotification","status","message","store","reducer","cart","ui","sendCartData","dispatch","uiActions","sendRequest","response","fetch","method","body","JSON","stringify","ok","Error","error","fetchCartData","fetchData","data","json","cartActions","actions"],"sources":["/Users/nashtayalikhan/Downloads/01-starting-project 12/src/store/store.js"],"sourcesContent":["import { configureStore,createSlice } from \"@reduxjs/toolkit\";\n\n\n\nconst cartSlice = createSlice({\n    name:'cart',\n    initialState: {\n        items : [],\n        totalQuantity: 0\n    },\n    reducers:{\n        replaceCart(state,action){\n            state.totalQuantity = action.payload.totalQuantity\n            state.items = action.payload.items\n        },\n        addItem(state,action){\n            const newItem = action.payload\n            console.log(newItem.id)\n            const existingItem = state.items.find(item=>item.itemId===newItem.id)\n            console.log(existingItem)\n            state.totalQuantity+=1\n            if (!existingItem){\n                state.items.push({\n                    itemId: newItem.id,\n                    price: newItem.price,\n                    quantity:newItem.quantity,\n                    totalPrice: newItem.price* newItem.quantity,\n                    name: newItem.title\n                })\n            }else{\n                existingItem.quantity+=1\n                existingItem.totalPrice+= existingItem.price\n            }\n        },\n        removeItem(state,action){\n            const id = action.payload\n            const neededItemIndex = state.items.findIndex(item=>item.itemId===id)\n            if (state.items[neededItemIndex].quantity===1){\n                state.items = state.items.filter(item=>item.itemId!==id)\n            }else{\n                state.items[neededItemIndex].quantity-=1\n                state.items[neededItemIndex].totalPrice -= state.items[neededItemIndex].price\n            }\n        }\n    }\n})\n\nconst uiSlice = createSlice({\n    name: 'ui',\n    initialState: {\n        cartIsVisible: false,\n        notification: null\n    },\n    reducers:{\n        toggle(state){\n            state.cartIsVisible = !state.cartIsVisible\n        },\n        showNotification(state,action){\n            state.notification = {\n                status: action.payload.status,\n                title: action.payload.title,\n                message: action.payload.message\n            }\n        }\n    }\n})\n\nconst store = configureStore({\n    reducer: {cart: cartSlice.reducer, ui:uiSlice.reducer}\n})\n\nexport function sendCartData(cart){\n    return async (dispatch) => {\n\n        dispatch(uiActions.showNotification({\n            status:'pending',\n            title: 'Sending',\n            message: 'Sending cart data!'\n        }))\n        \n        async function sendRequest(){\n            const response = fetch('https://reactpractice-f5d9b-default-rtdb.firebaseio.com/cart.json',{\n                method: 'PUT',\n                body: JSON.stringify(cart)\n            })\n\n            if (!response.ok){\n                throw new Error('Sending cart data failed!')\n            }\n        }\n\n        try{\n            await sendRequest()\n\n            dispatch(uiActions.showNotification({\n                status:'success',\n                title: 'Success',\n                message: 'Sent cart data successfully!'\n            }))\n        }catch (error){\n            dispatch(uiActions.showNotification({\n                status:'error',\n                title: 'Error',\n                message: 'Could not save your data!'\n            }))\n        }\n    }\n}\n\nexport function fetchCartData(){\n    return async dispatch => {\n        async function fetchData(){\n            const response = await fetch('https://reactpractice-f5d9b-default-rtdb.firebaseio.com/cart.json')\n\n            if (!response.ok){\n                throw new Error('Could not fetch cart data!')\n            }\n            const data = await response.json()\n            return data\n        }\n\n        try{\n            const data = await fetchData()\n            console.log(data)\n            dispatch(cartActions.replaceCart(data))\n        }catch (error){\n            dispatch(uiActions.showNotification({\n                status: 'error',\n                title: 'Error',\n                message: 'Could not fetch the data!'\n            }))\n        }\n\n    }\n}\nexport const cartActions = cartSlice.actions\nexport const uiActions = uiSlice.actions\n\nexport default store"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}